prepare() {
    true
}

build() {
    # the following 2 line were in prepare(), but they need to be run here because during prepare yosys repo isn't checked out yet
    cd "${srcdir}/abc"
    git checkout "$(make --silent -C "${srcdir}/yosys" echo-abc-rev)"

    cd "${srcdir}/yosys"

    ln -s "${srcdir}/abc/" .

    make config-gcc
    echo "ENABLE_LIBYOSYS=1" >> Makefile.conf
    echo "ENABLE_PYOSYS=1" >> Makefile.conf
    echo "ABCPULL=0" >> Makefile.conf

    make PREFIX="/usr"
}
